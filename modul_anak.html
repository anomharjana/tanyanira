<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skrining Kesehatan Anak</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f6f8;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #2269a3;
      color: white;
      padding: 20px;
      text-align: center;
    }

    section {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    h2,
    h3 {
      color: #333;
    }

    label {
      display: flex;
      align-items: center;
      margin-top: 15px;
      font-weight: 600;
    }

    label i {
      margin-right: 10px;
      font-size: 20px;
      color: #2269a3;
    }

    .input-container {
      margin-top: 5px;
    }

    input,
    select {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    button {
      margin-top: 30px;
      padding: 12px 20px;
      background-color: #2269a3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #1b537f;
    }

    .result {
      margin-top: 30px;
    }

    .card {
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 16px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .card.good {
      background-color: #e0fbe2;
      border-left: 5px solid #32cd32;
    }

    .card.bad {
      background-color: #ffe6e6;
      border-left: 5px solid #ff4d4d;
    }

    .card h4 {
      margin-top: 0;
    }

    .recommendation-list {
      margin-left: 1rem;
      padding-left: 1rem;
    }

    .recommendation-list li {
      margin-bottom: 8px;
    }

    .home-button {
      display: block;
      margin: 40px auto;
      padding: 12px 24px;
      background-color: #444;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .home-button:hover {
      background-color: #000;
    }
  </style>
</head>

<body>
  <header>
    <h1>Skrining Kesehatan Anak (0-9 Tahun)</h1>
    <p>Form evaluasi kesehatan anak berdasarkan gejala umum</p>
  </header>

  <section>
    <h2>Form Skrining</h2>
    <form id="screening-form">
      <!-- Informasi Dasar -->
      <label for="age"><i class="fas fa-baby"></i> Usia Anak (tahun)</label>
      <div class="input-container">
        <input type="number" id="age" min="0" max="9" required />
      </div>

      <label for="weight"><i class="fas fa-weight"></i> Berat Badan (kg)</label>
      <div class="input-container">
        <input type="number" id="weight" required />
      </div>

      <label for="height"><i class="fas fa-ruler"></i> Tinggi Badan (cm)</label>
      <div class="input-container">
        <input type="number" id="height" required />
      </div>

      <label for="gender"><i class="fas fa-genderless"></i> Jenis Kelamin</label>
      <div class="input-container">
        <select id="gender" required>
          <option value="">Pilih</option>
          <option value="male">Laki-laki</option>
          <option value="female">Perempuan</option>
        </select>
      </div>

      <!-- Gejala -->
      <h3>ISPA</h3>
      <label for="cough"><i class="fas fa-cough"></i> Batuk berkepanjangan?</label>
      <div class="input-container">
        <select id="cough" required>
          <option value="">Pilih</option>
          <option value="yes">Ya</option>
          <option value="no">Tidak</option>
        </select>
      </div>

      <label for="shortnessBreath"><i class="fas fa-lungs"></i> Sesak napas?</label>
      <div class="input-container">
        <select id="shortnessBreath" required>
          <option value="">Pilih</option>
          <option value="yes">Ya</option>
          <option value="no">Tidak</option>
        </select>
      </div>

      <label for="fever"><i class="fas fa-thermometer-half"></i> Demam?</label>
      <div class="input-container">
        <select id="fever" required>
          <option value="">Pilih</option>
          <option value="yes">Ya</option>
          <option value="no">Tidak</option>
        </select>
      </div>

      <h3>Diare</h3>
      <label for="diarrheaFrequency"><i class="fas fa-poo"></i> Frekuensi diare?</label>
      <div class="input-container">
        <select id="diarrheaFrequency" required>
          <option value="">Pilih</option>
          <option value="frequent">Setiap hari</option>
          <option value="occasional">Kadang-kadang</option>
          <option value="none">Tidak</option>
        </select>
      </div>

      <label for="dehydrationSigns"><i class="fas fa-tint"></i> Tanda dehidrasi?</label>
      <div class="input-container">
        <select id="dehydrationSigns" required>
          <option value="">Pilih</option>
          <option value="yes">Ya</option>
          <option value="no">Tidak</option>
        </select>
      </div>

      <h3>Anemia</h3>
      <label for="fatigue"><i class="fas fa-bed"></i> Mudah lelah?</label>
      <div class="input-container">
        <select id="fatigue" required>
          <option value="">Pilih</option>
          <option value="yes">Ya</option>
          <option value="no">Tidak</option>
        </select>
      </div>

      <label for="paleSkin"><i class="fas fa-skin-sun"></i> Kulit pucat?</label>
      <div class="input-container">
        <select id="paleSkin" required>
          <option value="">Pilih</option>
          <option value="yes">Ya</option>
          <option value="no">Tidak</option>
        </select>
      </div>

      <h3>Vaksinasi</h3>
      <label for="vaccinationStatus"><i class="fas fa-syringe"></i> Vaksinasi lengkap?</label>
      <div class="input-container">
        <select id="vaccinationStatus" required>
          <option value="">Pilih</option>
          <option value="yes">Ya</option>
          <option value="no">Tidak</option>
        </select>
      </div>

      <button type="submit">Proses Skrining</button>
    </form>

    <div id="result" class="result"></div>
  </section>

  <button class="home-button" onclick="window.location.href='index.html'">Menu Utama</button>

<!-- SCRIPT CHATBOT CHATLING -->
<script>
  window.chtlConfig = { chatbotId: "8275362696" };
</script>
<script async data-id="8275362696" id="chatling-embed-script" type="text/javascript"
  src="https://chatling.ai/js/embed.js"></script>

  <script>
    const referenceData = {
      male: {0:{median:49,sd:2.2},1:{median:75,sd:3.2},2:{median:85,sd:3.4},3:{median:95,sd:3.6},4:{median:103,sd:3.7},5:{median:110,sd:3.8},6:{median:116,sd:4},7:{median:122,sd:4.1},8:{median:127,sd:4.3},9:{median:132,sd:4.5}},
      female: {0:{median:48.5,sd:2.1},1:{median:73.5,sd:3.0},2:{median:83,sd:3.2},3:{median:92,sd:3.4},4:{median:100,sd:3.5},5:{median:106.5,sd:3.6},6:{median:112,sd:3.8},7:{median:117.5,sd:4.0},8:{median:123,sd:4.2},9:{median:128,sd:4.4}}
    };

    function renderCard(title, items, type = 'bad') {
      const icon = type === 'good' ? '✅' : '⚠️';
      return `
        <div class="card ${type}">
          <h4><i class="fas ${type === 'good' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i> ${title}</h4>
          <ul class="recommendation-list">
            ${items.map(item => `<li><i class="fas ${type === 'good' ? 'fa-check-circle' : 'fa-times-circle'}"></i> ${item}</li>`).join('')}
          </ul>
        </div>
      `;
    }

    function calculateBMI(weight, height) {
      return weight / Math.pow(height / 100, 2);
    }

    function analyzeForm(data) {
      let output = [];

      const bmi = calculateBMI(data.weight, data.height);
      if (bmi < 18.5) {
        output.push(renderCard("Status Gizi: Underweight", [
          "Berat badan rendah, kemungkinan kurang gizi.",
          "Konsultasikan ke ahli gizi.",
          "Tingkatkan asupan makanan bergizi tinggi kalori."
        ], 'bad'));
      } else if (bmi < 25) {
        output.push(renderCard("Status Gizi: Normal", [
          "Berat badan ideal.",
          "Pertahankan pola makan dan aktivitas sehat.",
          "Lanjutkan pemantauan berkala di posyandu."
        ], 'good'));
      } else {
        output.push(renderCard("Status Gizi: Overweight", [
          "Berat badan berlebih, perlu perhatian.",
          "Kurangi konsumsi makanan tinggi gula dan lemak.",
          "Tingkatkan aktivitas fisik."
        ], 'bad'));
      }

      const { median, sd } = referenceData[data.gender][data.age];
      const z = (data.height - median) / sd;
      if (z <= -3) {
        output.push(renderCard("Stunting Berat", [
          "Tinggi badan sangat di bawah standar.",
          "Perlu intervensi segera dari fasilitas kesehatan.",
          "Tingkatkan asupan gizi seimbang."
        ], 'bad'));
      } else if (z <= -2) {
        output.push(renderCard("Risiko Stunting", [
          "Tinggi badan agak di bawah standar.",
          "Pantau pertumbuhan rutin dan perbaiki pola makan.",
          "Bisa diberi suplemen sesuai anjuran tenaga medis."
        ], 'bad'));
      } else {
        output.push(renderCard("Tinggi Badan Normal", [
          "Pertumbuhan anak sesuai usia.",
          "Pertahankan asupan makanan bergizi.",
          "Lanjutkan stimulasi dan pantauan rutin."
        ], 'good'));
      }

      if (data.cough === "yes" || data.shortnessBreath === "yes" || data.fever === "yes") {
        output.push(renderCard("Gejala ISPA", [
          "Ada gejala infeksi saluran napas.",
          "Konsultasi ke dokter.",
          "Berikan istirahat dan hidrasi cukup."
        ], 'bad'));
      } else {
        output.push(renderCard("Tidak Ada ISPA", [
          "Tidak ditemukan gejala pernapasan.",
          "Jaga lingkungan bersih dan sehat."
        ], 'good'));
      }

      if (data.diarrheaFrequency === "frequent" || data.dehydrationSigns === "yes") {
        output.push(renderCard("Diare atau Dehidrasi", [
          "Berikan cairan oralit.",
          "Bawa ke tenaga medis bila parah atau berlanjut.",
          "Pantau asupan cairan dan kondisi anak."
        ], 'bad'));
      } else if (data.diarrheaFrequency === "occasional") {
        output.push(renderCard("Diare Ringan", [
          "Pantau frekuensi BAB dan kondisi anak.",
          "Jaga kebersihan makanan/minuman."
        ], 'good'));
      } else {
        output.push(renderCard("Tidak Ada Diare", [
          "Sistem pencernaan anak dalam kondisi baik.",
          "Terus jaga kebersihan makanan dan air."
        ], 'good'));
      }

      if (data.fatigue === "yes" || data.paleSkin === "yes") {
        output.push(renderCard("Tanda Anemia", [
          "Mungkin mengalami kekurangan zat besi.",
          "Konsumsi makanan tinggi zat besi (bayam, daging).",
          "Konsultasi ke dokter untuk pemeriksaan darah."
        ], 'bad'));
      } else {
        output.push(renderCard("Tidak Ada Gejala Anemia", [
          "Energi dan warna kulit normal.",
          "Lanjutkan pola makan tinggi zat besi."
        ], 'good'));
      }

      if (data.vaccinationStatus === "no") {
        output.push(renderCard("Vaksinasi Belum Lengkap", [
          "Segera lengkapi imunisasi anak.",
          "Periksa catatan imunisasi.",
          "Hubungi puskesmas atau dokter anak."
        ], 'bad'));
      } else {
        output.push(renderCard("Vaksinasi Lengkap", [
          "Imunisasi sesuai usia telah terpenuhi.",
          "Pertahankan dan ikuti jadwal booster."
        ], 'good'));
      }

      return output;
    }

    document.getElementById('screening-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const data = {
        age: parseInt(document.getElementById('age').value),
        weight: parseFloat(document.getElementById('weight').value),
        height: parseFloat(document.getElementById('height').value),
        gender: document.getElementById('gender').value,
        cough: document.getElementById('cough').value,
        shortnessBreath: document.getElementById('shortnessBreath').value,
        fever: document.getElementById('fever').value,
        diarrheaFrequency: document.getElementById('diarrheaFrequency').value,
        dehydrationSigns: document.getElementById('dehydrationSigns').value,
        fatigue: document.getElementById('fatigue').value,
        paleSkin: document.getElementById('paleSkin').value,
        vaccinationStatus: document.getElementById('vaccinationStatus').value
      };

      const resultCards = analyzeForm(data);
      document.getElementById('result').innerHTML = resultCards.join('');
    });
  </script>
</body>

</html>
